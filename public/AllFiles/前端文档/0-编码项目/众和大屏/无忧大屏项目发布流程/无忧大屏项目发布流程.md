# 一、公用文档

```
docker cp /databases/project-client/paas-nodejs/paas-nodejs/open-apps/ENVTAG/1d95c64b675a724a paas-nodejs:/opt/node/node/open-apps/ENVTAG
// vpn 账号：郭翔 密码：123456
// 众合发布管理平台   地址：http://10.73.11.120/  账号：zhhadmin 密码：zhh@2023
// 测试服务器 账号：root  密码：aykj83752661
// 五指山  账号：administrator   密码：Aykj@83752661
// 众合平台账号 账号密码  admin_tbzh    新：Xjzh@83752661    旧：aykj123456
// 在前端工程中打包npm run build 生成一个1d95c64b675a724a.zip文件
// 解压1d95c64b675a724a.zip文件到1d95c64b675a724a文件夹中
// 将文件夹1d95c64b675a724a放到容器的对应目录 paas-nodejs:/opt/node/node/open-apps/ENVTAG
// 进入容器
docker exec -it paas-nodejs /bin/sh
// 修改nginx服务
vim /etc/nginx/sites-enabled/node_qycloud.conf
//添加nginx反向代理配置
location ^~ /api/base/instance/ {
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header Host $http_host;
        proxy_set_header X-NginX-Proxy true;
        proxy_redirect off;
        proxy_pass http://10.73.9.31:9999;
    }


location ^~ /api/base/player/ {
        proxy_pass http://10.73.9.31:9999;
        proxy_http_version 1.1;
        proxy_set_header Upgrade $http_upgrade;
        proxy_set_header Connection "upgrade";
    }
```



# 二、测试环境 - Windows

## 1. 项目打包

```sh
$ pnpm run build
```



## 2. 连接VPN

Windows: Hillstone Secure Connect

vpn 账号：郭翔     密码：123456

![](/AllFiles/前端文档/0-编码项目/众和大屏/无忧大屏项目发布流程/images_publish/010.png)



## 3. 生成的包，传递到服务器

第一步：确保VPN链接，内网。

* vpn 账号：郭翔 密码：123456

第二步：链接到文件服务器

* 主机：10.73.11.61
* 用户名：root
* 密码：aykj83752661
* sftp 端口：22

![](/AllFiles/前端文档/0-编码项目/众和大屏/无忧大屏项目发布流程/images_publish/011.png)

第三步：前往服务器指定路径，将本地文件上传到服务器指定路径下

```sh
# sftp文件路径
/databases/project-client/paas-nodejs/paas-nodejs/open-apps/ENVTAG
```

![](/AllFiles/前端文档/0-编码项目/众和大屏/无忧大屏项目发布流程/images_publish/002.png)



## 4. ssh链接到服务器

打开Windows Putty软件，登录ssh

![](/AllFiles/前端文档/0-编码项目/众和大屏/无忧大屏项目发布流程/images_publish/012.png)

![](/AllFiles/前端文档/0-编码项目/众和大屏/无忧大屏项目发布流程/images_publish/001.png)

终端链接到测试服务器

```sh
服务器账号：root  密码：aykj83752661
```

运行docker命令

```sh
$ docker cp /databases/project-client/paas-nodejs/paas-nodejs/open-apps/ENVTAG/1d95c64b675a724a paas-nodejs:/opt/node/node/open-apps/ENVTAG
```



## 5. 验证

http://124.117.210.142:18000/xjzh-big-screen/safety-risk-control-one-page

https://hsse.joinworld.com/xjzh-big-screen/safety-risk-control-one-page

* 账号：admin_tbzh
* 密码：新：Xjzh@83752661    旧：aykj123456



# 三、测试环境 - Mac

## 1. 项目打包

```sh
$ pnpm run build
```



## 2. 连接VPN

Mac VPN客户端:  https://www.hillstonenet.com.cn/support-and-training/hillstone-secure-connect/#macos

> 服务器地址：vpn.joinworld.com 
>
> vpn 账号：郭翔     密码：123456



![](/AllFiles/前端文档/0-编码项目/众和大屏/无忧大屏项目发布流程/images_publish/013.png)

![](/AllFiles/前端文档/0-编码项目/众和大屏/无忧大屏项目发布流程/images_publish/014.png)

![](/AllFiles/前端文档/0-编码项目/众和大屏/无忧大屏项目发布流程/images_publish/015.png)

![](/AllFiles/前端文档/0-编码项目/众和大屏/无忧大屏项目发布流程/images_publish/016.png)



## 3. sftp连接服务器

第一步：确保VPN链接，内网。

* vpn 账号：郭翔 密码：123456

第二步：链接到文件服务器

* 主机：10.73.11.61
* 用户名：root
* 密码：aykj83752661
* sftp 端口：22

![](/AllFiles/前端文档/0-编码项目/众和大屏/无忧大屏项目发布流程/images_publish/017.png)



第三步：前往服务器指定路径，将本地文件上传到服务器指定路径下

```sh
# sftp文件路径
/databases/project-client/paas-nodejs/paas-nodejs/open-apps/ENVTAG
```



## 4 -1 上传ZIP包后解压（推荐）

直接拖拽打包好的ZIP文件，然后登录ssh，命令行解压

```sh
# 链接到服务器
$ ssh -o HostKeyAlgorithms=+ssh-rsa root@10.73.11.61 -p 22

# 到指定目录下
$ cd /databases/project-client/paas-nodejs/paas-nodejs/open-apps/ENVTAG/

# 解压 指定的文件夹下
$ unzip 1d95c64b675a724a.zip -d 1d95c64b675a724a
```



## 4 -2 先解压后上传文件夹（不推荐）

直接拖拽解压出来的文件`1d95c64xxxxx`



## 5. SSH

MAC终端自带ssh，直接连

```sh
$ ssh -o HostKeyAlgorithms=+ssh-rsa root@10.73.11.61 -p 22
```



终端链接到测试服务器

```sh
服务器账号：root  密码：aykj83752661
```

运行docker命令

```sh
$ docker cp /databases/project-client/paas-nodejs/paas-nodejs/open-apps/ENVTAG/1d95c64b675a724a paas-nodejs:/opt/node/node/open-apps/ENVTAG
```



![](/AllFiles/前端文档/0-编码项目/众和大屏/无忧大屏项目发布流程/images_publish/018.png)



## 6. 验证

http://124.117.210.142:18000/xjzh-big-screen/safety-risk-control-one-page

https://hsse.joinworld.com/xjzh-big-screen/safety-risk-control-one-page

* 账号：admin_tbzh
* 密码：新：Xjzh@83752661    旧：aykj123456





# 四、生产环境

## 1. 项目打包

```sh
$ pnpm run build
```



## 2. 连接VPN

Windows: Hillstone Secure Connect

vpn 账号：郭翔     密码：123456

![](/AllFiles/前端文档/0-编码项目/众和大屏/无忧大屏项目发布流程/images_publish/010.png)



## 3. 打开众合发布管理平台

* **前提：必须VPN**

* 众合发布管理平台

    * 地址：http://10.73.11.120/  

    * 账号：zhhadmin 密码：zhh@2023

![](/AllFiles/前端文档/0-编码项目/众和大屏/无忧大屏项目发布流程/images_publish/003.png)



## 4. 上传包

![](/AllFiles/前端文档/0-编码项目/众和大屏/无忧大屏项目发布流程/images_publish/004.png)

![](/AllFiles/前端文档/0-编码项目/众和大屏/无忧大屏项目发布流程/images_publish/005.png)



## 5. 上传成功 -》标记成品 -》发布

![](/AllFiles/前端文档/0-编码项目/众和大屏/无忧大屏项目发布流程/images_publish/006.png)

![](/AllFiles/前端文档/0-编码项目/众和大屏/无忧大屏项目发布流程/images_publish/007.png)

![](/AllFiles/前端文档/0-编码项目/众和大屏/无忧大屏项目发布流程/images_publish/008.png)

![](/AllFiles/前端文档/0-编码项目/众和大屏/无忧大屏项目发布流程/images_publish/009.png)



## 6. 验证

http://124.117.210.142:18000/xjzh-big-screen/safety-risk-control-one-page

https://hsse.joinworld.com/xjzh-big-screen/safety-risk-control-one-page

* 账号：admin_tbzh
* 密码：新：Xjzh@83752661    旧：aykj123456



https://hsse.joinworld.com/xjzh-big-screen/target-duty-one-page

https://hsse.joinworld.com/xjzh-big-screen/institutionalized-manage-one-page

https://hsse.joinworld.com/xjzh-big-screen/education-training-one-page

https://hsse.joinworld.com/xjzh-big-screen/on-site-management-one-page

https://hsse.joinworld.com/xjzh-big-screen/security-manage-one-page

http://124.117.210.142:18000/xjzh-big-screen/institutionalized-manage-one-page





# 五、五指山上传包 - 有问题⚠️（使用二、三方式）

## 1. 需求来源

测试环境地址：http://10.73.11.61:18000/xjzh-big-screen/emergency-one-page

![](/AllFiles/前端文档/0-编码项目/众和大屏/无忧大屏项目发布流程/images_publish/019.png)

![](/AllFiles/前端文档/0-编码项目/众和大屏/无忧大屏项目发布流程/images_publish/020.png)



## 2. 连接VPN - 同上



## 3. 打开五指山

五指山：10.73.11.61:58080

* admin / Aykj@83752661#!

    

## 4. 上传制品 zip文件

![](/AllFiles/前端文档/0-编码项目/众和大屏/无忧大屏项目发布流程/images_publish/021.png)

![](/AllFiles/前端文档/0-编码项目/众和大屏/无忧大屏项目发布流程/images_publish/022.png)





# 六、线上环境测试账号

https://hsse.joinworld.com/

```
195252   195252333   切换下罗荣献
```



# 七、发布测试环境，打开空白问题

生产环境23.6

测试环境23.12



路由匹配规则改动了，导致 
